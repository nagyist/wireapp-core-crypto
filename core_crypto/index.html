<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Core Crypto is a wrapper on top of OpenMLS aimed to provide an ergonomic API for usage in web through Web Assembly and in mobile devices through FFI."><meta name="keywords" content="rust, rustlang, rust-lang, core_crypto"><title>core_crypto - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../core_crypto/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../core_crypto/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate core_crypto</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.6.0-rc.3</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">core_crypto</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/core_crypto/lib.rs.html#17-168">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Core Crypto is a wrapper on top of OpenMLS aimed to provide an ergonomic API for usage in web
through Web Assembly and in mobile devices through FFI.</p>
<p>The goal is provide a easier and less verbose API to create, manage and interact with MLS
groups.</p>
<h2 id="wire-corecrypto"><a href="#wire-corecrypto">Wire CoreCrypto</a></h2>
<p><a href="https://wire.com/jobs/"><img src="https://github.com/wireapp/wire/blob/master/assets/header-small.png?raw=true" alt="Wire logo" /></a></p>
<p>This repository is part of the source code of Wire. You can find more information at <a href="https://wire.com">wire.com</a> or by contacting opensource@wire.com.</p>
<p>You can find the published source code at <a href="https://github.com/wireapp/wire">github.com/wireapp/wire</a>.</p>
<p>For licensing information, see the attached LICENSE file and the list of third-party licenses at <a href="https://wire.com/legal/licenses/">wire.com/legal/licenses/</a>.</p>
<p>No license is granted to the Wire trademark and its associated logos, all of which will continue to be owned exclusively by Wire Swiss GmbH. Any use of the Wire trademark and/or its associated logos is expressly prohibited without the express prior written consent of Wire Swiss GmbH.</p>
<h3 id="parts"><a href="#parts">Parts</a></h3>
<ul>
<li>CoreCrypto: Abstracts MLS &amp; Proteus in a unified API</li>
<li>CoreCryptoFFI: FFI bindings for iOS, Android and WASM</li>
<li>Keystore: Encrypted Keystore powered by SQLCipher on all platforms except WASM. WASM uses an IndexedDB-backed, encrypted store with AES256-GCM</li>
<li>MlsProvider: RustCrypto + Keystore MLS provider</li>
</ul>
<p>See <a href="docs/ARCHITECTURE.md">ARCHITECTURE.md</a></p>
<h3 id="usage"><a href="#usage">Usage</a></h3><h4 id="api-docs"><a href="#api-docs">API Docs</a></h4><h3 id="building"><a href="#building">Building</a></h3><h4 id="general-requirements"><a href="#general-requirements">General Requirements</a></h4>
<ul>
<li>rust: <a href="https://www.rust-lang.org/tools/install">https://www.rust-lang.org/tools/install</a></li>
<li>cargo-make: <a href="https://sagiegurari.github.io/cargo-make/">https://sagiegurari.github.io/cargo-make/</a></li>
</ul>
<h4 id="android"><a href="#android">Android</a></h4>
<p>Install Android SDK and Build-Tools for API level 30+</p>
<p>NOTE: If you are building on macOS you’ll need to setup $ANDROID_SDK_ROOT path variable manually:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>export ANDROID_SDK_ROOT=~/Android/Sdk</code></pre></div>
<p>Install android rust targets</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>rustup target add x86_64-linux-android aarch64-linux-android armv7-linux-androideabi i686-linux-android</code></pre></div>
<h4 id="ios"><a href="#ios">iOS</a></h4>
<p>Install Xcode &amp; it’s commandline tools: <a href="https://developer.apple.com/xcode/">https://developer.apple.com/xcode/</a></p>
<p>Install iOS rust targets</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>rustup target add aarch64-apple-ios x86_64-apple-ios aarch64-apple-ios-sim</code></pre></div>
<h4 id="macos"><a href="#macos">MacOS</a></h4>
<p>Install macOS rust targets</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>rustup target add x86_64-apple-darwin
rustup target add aarch64-apple-darwin</code></pre></div>
<h4 id="linux"><a href="#linux">Linux</a></h4>
<p>If cross-compiling from macOS you’ll need install: <a href="https://github.com/messense/homebrew-macos-cross-toolchains">https://github.com/messense/homebrew-macos-cross-toolchains</a></p>
<p>Install linux targets</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>rustup target add x86_64-unknown-linux-gnu</code></pre></div>
<h4 id="wasm"><a href="#wasm">WASM</a></h4>
<ul>
<li>Install <a href="https://rustwasm.github.io/wasm-pack/">wasm-pack</a></li>
<li>Install the wasm32-unknown-unknown toolchain <code>rustup target add wasm32-unknown-unknown</code></li>
<li>Install node.js (recommended way is via <a href="https://volta.sh/">Volta</a>)</li>
</ul>
<h4 id="bindings"><a href="#bindings">Bindings</a></h4>
<p>Build bindings for Android, JVM, iOS and WASM</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>cd crypto-ffi 

cargo make <span class="string">&quot;copy-jvm-resources&quot;

</span>cargo make <span class="string">&quot;copy-android-resources&quot;

</span>cargo make <span class="string">&quot;create-swift-package&quot;

</span>cargo make wasm</code></pre></div>
<h3 id="publishing"><a href="#publishing">Publishing</a></h3><h4 id="versioning"><a href="#versioning">Versioning</a></h4>
<ul>
<li>Run <code>cargo xtask release bump [major|minor|patch|rc|pre]</code></li>
<li>Update the internal dependencies of the updated crates to use the new version</li>
<li>Update the version in the <code>package.json</code></li>
<li>Update the version in the <code>build.gradle.kts</code> inside <code>./kotlin/android</code> and <code>./kotlin/jvm</code></li>
</ul>
<h4 id="changelog"><a href="#changelog">Changelog</a></h4>
<ul>
<li>Update &lt;CHANGELOG.tpl&gt; accordingly</li>
<li>Fetch the latest tags from the remote</li>
<li>run <code>cargo xtask documentation changelog</code> to update &lt;CHANGELOG.md&gt; with the git-conventional history</li>
</ul>
<h4 id="android--jvm"><a href="#android--jvm">Android / JVM</a></h4>
<p>You can publish the JVM and Android bindings to maven using gradle after you’be build the corresponding target.</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>cd kotlin
./gradlew :jvm:publishToMavenLocal
./gradlew :android:publishToMavenLocal</code></pre></div>
<h4 id="js--wasm"><a href="#js--wasm">JS / WASM</a></h4>
<p>Given that you are logged in NPM and can publish to <code>@wireapp/core-crypto</code>, you can just <code>npm publish</code> to push a new version</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="mls/index.html" title="core_crypto::mls mod">mls</a></div><div class="item-right docblock-short">MLS Abstraction</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="core_crypto::prelude mod">prelude</a></div><div class="item-right docblock-short">Common imports that should be useful for most uses of the crate</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="proteus/index.html" title="core_crypto::proteus mod">proteus</a></div><div class="item-right docblock-short">Proteus Abstraction</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CoreCrypto.html" title="core_crypto::CoreCrypto struct">CoreCrypto</a></div><div class="item-right docblock-short">Wrapper superstruct for both <a href="mls/struct.MlsCentral.html" title="mls::MlsCentral">mls::MlsCentral</a> and <a href="proteus/struct.ProteusCentral.html" title="proteus::ProteusCentral">proteus::ProteusCentral</a>
As <a href="https://doc.rust-lang.org/1.66.0/core/ops/deref/trait.Deref.html" title="std::ops::Deref">std::ops::Deref</a> is implemented, this struct is automatically dereferred to <a href="mls/struct.MlsCentral.html" title="mls::MlsCentral">mls::MlsCentral</a> apart from <code>proteus_*</code> calls</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CryptoError.html" title="core_crypto::CryptoError enum">CryptoError</a></div><div class="item-right docblock-short">CoreCrypto errors</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CryptoboxMigrationError.html" title="core_crypto::CryptoboxMigrationError enum">CryptoboxMigrationError</a></div><div class="item-right docblock-short">Wrapper for errors that can happen during a Cryptobox migration</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MlsError.html" title="core_crypto::MlsError enum">MlsError</a></div><div class="item-right docblock-short">MLS-specific error wrapper - see github.com/openmls/openmls for details</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ProteusError.html" title="core_crypto::ProteusError enum">ProteusError</a></div><div class="item-right docblock-short">Wrapper for Proteus-related errors</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.CoreCryptoCallbacks.html" title="core_crypto::CoreCryptoCallbacks trait">CoreCryptoCallbacks</a></div><div class="item-right docblock-short">This trait is used to provide callback mechanisms for the MlsCentral struct, for example for
operations like adding or removing memebers that can be authorized through a caller provided
authorization method.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.CryptoResult.html" title="core_crypto::CryptoResult type">CryptoResult</a></div><div class="item-right docblock-short">A simpler definition for Result types that the Error is a <a href="prelude/enum.CryptoError.html" title="CryptoError">CryptoError</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="core_crypto" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0 (69f9c33d7 2022-12-12)" ></div></body></html>